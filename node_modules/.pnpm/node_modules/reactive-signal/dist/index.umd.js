!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e||self).ReactiveSignal={})}(this,function(e){function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,"symbol"==typeof(s=function(e,n){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key))?s:String(s),i)}var s}function t(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var i=null,s=!1,o=new Set,r=null;function u(){return r}var c=/*#__PURE__*/function(){function e(e){this._value=void 0,this.subscribers=new Set,this.depsComponents=new Set,this.notifying=!1,this._value=e}var n=e.prototype;return n.peek=function(){return this._value},n.update=function(){this.notify(),this.depsComponents.forEach(function(e){var n;return null==(n=e[e._tempActiveUpdateFnName])?void 0:n.call(e)}),this.subscribers.forEach(function(e){e.computedInstance&&e.computedInstance.subscribers.forEach(function(e){e.done=!1}),e.done=!1})},n.subscribe=function(e){this.subscribers.add(e)},n.unsubscribe=function(e){this.subscribers.delete(e)},n.notify=function(){s?this.subscribers.forEach(function(e){return o.add(e)}):(this.notifying=!0,this.subscribers.forEach(function(e){"function"!=typeof e||e.done||(e.done=!0,e())}),this.notifying=!1)},t(e,[{key:"value",get:function(){this.notifying||i&&(i.run&&this.subscribe(i.run),i.addDependency(this));var e=u();return e&&this.depsComponents.add(e),this._value},set:function(e){e!==this._value&&(this._value=e,this.update())}}]),e}(),f=/*#__PURE__*/function(){function e(e){var n=this;this.computeFn=void 0,this._value=void 0,this.dependencies=new Set,this.subscribers=new Set,this.depsComponents=new Set,this.notifying=!1,this.recompute=function(){var e=n.compute();e!==n._value&&(n._value=e,n.notify(),n.depsComponents.forEach(function(e){var n;return null==(n=e[e._tempActiveUpdateFnName])?void 0:n.call(e)}))},this.computeFn=e,this._value=this.compute()}var n=e.prototype;return n.peek=function(){return this._value},n.compute=function(){var e=i;i=this;var n=this.computeFn();return i=e,n},n.subscribe=function(e){e&&this.subscribers.add(e)},n.unsubscribe=function(e){this.subscribers.delete(e)},n.notify=function(){s?this.subscribers.forEach(function(e){return o.add(e)}):(this.notifying=!0,this.subscribers.forEach(function(e){e.done||(e.done=!0,e())}),this.notifying=!1)},n.addDependency=function(e){this.dependencies.add(e),e.subscribe(this.recompute),this.recompute.computedInstance=this},t(e,[{key:"value",get:function(){this.notifying||i&&(this.subscribe(i.run),i.addDependency(this));var e=u();return e&&this.depsComponents.add(e),this._value}}]),e}(),a=/*#__PURE__*/function(){function e(e){var n=this;this.effectFn=void 0,this.dependencies=new Set,this.disposed=!1,this.run=function(){if(!n.disposed){var e=i;i=n,n.effectFn(),i=e}},this.effectFn=e,this.run()}var n=e.prototype;return n.addDependency=function(e){this.disposed||(this.dependencies.add(e),this.run.effectInstance=this,e.subscribe(this.run))},n.cleanup=function(){var e=this;this.dependencies.forEach(function(n){return n.unsubscribe(e.run)}),this.dependencies.clear()},n.dispose=function(){this.cleanup(),this.disposed=!0},e}();function d(e){return new c(e)}e.batch=function(e){s=!0;try{e()}finally{s=!1,o.forEach(function(e){e.done||(e.done=!0,e())}),o.forEach(function(e){e.done=!1}),o.clear()}},e.clearActiveComponent=function(){r=null},e.computed=function(e){return new f(e)},e.effect=function(e){var n=new a(e);return function(){return n.dispose()}},e.getActiveComponent=u,e.setActiveComponent=function(e,n){(r=e)._tempActiveUpdateFnName=n||"queuedUpdate"},e.signal=d,e.signalObject=function(e){return Object.entries(e).reduce(function(e,n){return e[n[0]]=d(n[1]),e},{})}});
//# sourceMappingURL=index.umd.js.map

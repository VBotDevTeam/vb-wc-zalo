function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,"symbol"==typeof(s=function(e,n){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key))?s:String(s),i)}var s}function n(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}var t=null,i=!1,s=new Set,r=null;function u(e,n){(r=e)._tempActiveUpdateFnName=n||"queuedUpdate"}function o(){r=null}function c(){return r}var f=/*#__PURE__*/function(){function e(e){this._value=void 0,this.subscribers=new Set,this.depsComponents=new Set,this.notifying=!1,this._value=e}var r=e.prototype;return r.peek=function(){return this._value},r.update=function(){this.notify(),this.depsComponents.forEach(function(e){var n;return null==(n=e[e._tempActiveUpdateFnName])?void 0:n.call(e)}),this.subscribers.forEach(function(e){e.computedInstance&&e.computedInstance.subscribers.forEach(function(e){e.done=!1}),e.done=!1})},r.subscribe=function(e){this.subscribers.add(e)},r.unsubscribe=function(e){this.subscribers.delete(e)},r.notify=function(){i?this.subscribers.forEach(function(e){return s.add(e)}):(this.notifying=!0,this.subscribers.forEach(function(e){"function"!=typeof e||e.done||(e.done=!0,e())}),this.notifying=!1)},n(e,[{key:"value",get:function(){this.notifying||t&&(t.run&&this.subscribe(t.run),t.addDependency(this));var e=c();return e&&this.depsComponents.add(e),this._value},set:function(e){e!==this._value&&(this._value=e,this.update())}}]),e}(),a=/*#__PURE__*/function(){function e(e){var n=this;this.computeFn=void 0,this._value=void 0,this.dependencies=new Set,this.subscribers=new Set,this.depsComponents=new Set,this.notifying=!1,this.recompute=function(){var e=n.compute();e!==n._value&&(n._value=e,n.notify(),n.depsComponents.forEach(function(e){var n;return null==(n=e[e._tempActiveUpdateFnName])?void 0:n.call(e)}))},this.computeFn=e,this._value=this.compute()}var r=e.prototype;return r.peek=function(){return this._value},r.compute=function(){var e=t;t=this;var n=this.computeFn();return t=e,n},r.subscribe=function(e){e&&this.subscribers.add(e)},r.unsubscribe=function(e){this.subscribers.delete(e)},r.notify=function(){i?this.subscribers.forEach(function(e){return s.add(e)}):(this.notifying=!0,this.subscribers.forEach(function(e){e.done||(e.done=!0,e())}),this.notifying=!1)},r.addDependency=function(e){this.dependencies.add(e),e.subscribe(this.recompute),this.recompute.computedInstance=this},n(e,[{key:"value",get:function(){this.notifying||t&&(this.subscribe(t.run),t.addDependency(this));var e=c();return e&&this.depsComponents.add(e),this._value}}]),e}(),d=/*#__PURE__*/function(){function e(e){var n=this;this.effectFn=void 0,this.dependencies=new Set,this.disposed=!1,this.run=function(){if(!n.disposed){var e=t;t=n,n.effectFn(),t=e}},this.effectFn=e,this.run()}var n=e.prototype;return n.addDependency=function(e){this.disposed||(this.dependencies.add(e),this.run.effectInstance=this,e.subscribe(this.run))},n.cleanup=function(){var e=this;this.dependencies.forEach(function(n){return n.unsubscribe(e.run)}),this.dependencies.clear()},n.dispose=function(){this.cleanup(),this.disposed=!0},e}();function h(e){return new f(e)}function p(e){return new a(e)}function b(e){var n=new d(e);return function(){return n.dispose()}}function v(e){i=!0;try{e()}finally{i=!1,s.forEach(function(e){e.done||(e.done=!0,e())}),s.forEach(function(e){e.done=!1}),s.clear()}}function l(e){return Object.entries(e).reduce(function(e,n){return e[n[0]]=h(n[1]),e},{})}export{v as batch,o as clearActiveComponent,p as computed,b as effect,c as getActiveComponent,u as setActiveComponent,h as signal,l as signalObject};
//# sourceMappingURL=index.module.js.map
